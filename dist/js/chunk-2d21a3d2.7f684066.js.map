{"version":3,"sources":["webpack:///./src/views/Home.vue","webpack:///./src/components/posts.vue","webpack:///./src/components/posts.vue?a98e","webpack:///./src/views/Home.vue?ab8c"],"names":["posts","getPosts","ref","class","post","key","id","title","excerpt","commentsCount","read","href","removePost","length","name","props","type","Array","default","data","showPostsMax","showPosts","computed","this","filter","i","mounted","loadPostsIfNeeded","timer","setInterval","methods","lastElement","$refs","lastElementChild","canShowMore","showMore","el","rect","getBoundingClientRect","windowHeight","window","innerHeight","document","documentElement","clientHeight","top","height","Math","min","$router","push","params","beforeUnmount","clearInterval","render","components","Posts"],"mappings":"iPACA,2CAAwB,GAAf,KAAK,UACZ,eAA2B,GAAnBA,MAAO,EAAAC,UAAQ,mB,mCCDlBC,IAAI,S,GAEAC,MAAM,a,GACLA,MAAM,c,GACPA,MAAM,a,GACJA,MAAM,qD,SAScA,MAAM,c,EACjC,eAEM,OAFDA,MAAM,aAAW,CACpB,eAAoD,KAAjDA,MAAM,0BAAyB,oB,mDAhBxC,eAmBM,MAnBN,EAmBM,E,mBAlBJ,eAYM,2BAZc,EAAAF,UAAQ,SAAhBG,G,wBAAZ,eAYM,OAZyBC,IAAKD,EAAKE,GAAIH,MAAM,c,CACjD,eAUM,MAVN,EAUM,CATJ,eAA4C,KAA5C,EAA4C,eAAlBC,EAAKG,OAAK,GACpC,eAA2C,IAA3C,EAA2C,eAAnBH,EAAKI,SAAO,GACpC,eAMM,MANN,EAMM,CALJ,eAAqD,YAA/C,kBAAe,eAAGJ,EAAKK,eAAa,GAC1C,eAGM,YAFJ,eAAsE,UAA9DN,MAAM,kBAAmB,QAAK,mBAAE,EAAAO,KAAKN,EAAKE,MAAK,SAAM,eAC7D,eAAwF,KAArFK,KAAK,cAAcR,MAAM,oBAAqB,QAAK,mBAAE,EAAAS,WAAWR,EAAKE,MAAK,UAAO,0B,MAKhF,EAAAL,SAASY,O,wCAArB,eAIM,MAJN,EAIM,CAHJ,M,mBASU,GACdC,KAAM,YACNC,MAAO,CACLf,MAAO,CAAEgB,KAAMC,MAAOC,QAAS,iBAAM,MAEvCC,KALc,WAMZ,MAAO,CACLC,aAAc,EACdC,UAAW,IAIfC,SAAU,CACRrB,SADQ,WACG,WACT,OAAOsB,KAAKvB,MAAMwB,QAAO,SAACpB,EAAMqB,GAAP,OAAaA,EAAI,EAAKJ,eAInDK,QAlBc,WAkBL,WACPH,KAAKI,oBACLJ,KAAKK,MAAQC,aAAY,kBAAM,EAAKF,sBAAqB,MAG3DG,QAAS,iCACJ,eAAW,CAAE,gBADX,IAGLH,kBAHO,WAIL,IAAMI,EAAcR,KAAKS,MAAMhC,MAAMiC,iBACjCV,KAAKW,YAAYH,IACnBR,KAAKY,YAITD,YAVO,SAUKE,GACV,IAAIA,EAAI,OAAO,KAEf,IAAMC,EAAOD,EAAGE,wBACVC,EAAeC,OAAOC,aAAeC,SAASC,gBAAgBC,aAEpE,OAAOP,EAAKQ,IAAMR,EAAKS,QAAUP,GAGnCJ,SAnBO,WAoBLZ,KAAKF,UAAY0B,KAAKC,IAAIzB,KAAKF,UAAYE,KAAKH,aAAcG,KAAKvB,MAAMa,SAG3EH,KAvBO,SAuBFJ,GACHiB,KAAK0B,QAAQC,KAAK,CAACpC,KAAM,OAAQqC,OAAQ,CAAE7C,WAI/C8C,cAnDc,WAoDZC,cAAc9B,KAAKK,SC1EvB,EAAO0B,OAAS,EAED,QFGC,GACdxC,KAAM,OACNyC,WAAY,CACVC,MAAA,GAEFlC,SAAU,kBACL,eAAW,CAAE,eGXpB,EAAOgC,OAASA,EAED","file":"js/chunk-2d21a3d2.7f684066.js","sourcesContent":["<template>\r\n  <heading text=\"Посты\" />\r\n  <posts :posts=\"getPosts\" />\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\"\r\nimport Posts from \"@/components/posts\"\r\nexport default ({\r\n  name: \"Home\",\r\n  components: {\r\n    Posts,\r\n  },\r\n  computed: {\r\n    ...mapGetters([ 'getPosts' ]),\r\n  },\r\n})\r\n</script>\r\n","<template>\r\n  <div ref=\"posts\">\r\n    <div v-for=\"post in getPosts\" :key=\"post.id\" class=\"card  mb-3\">\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">{{ post.title }}</h5>\r\n        <p class=\"card-text\">{{ post.excerpt }}</p>\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n          <span> Комментариев: {{ post.commentsCount }} </span>\r\n          <div>\r\n            <button class=\"btn btn-primary\" @click=\"read(post.id)\">Читать</button>\r\n            <a href=\"javascript:\" class=\"text-danger  ms-3\" @click=\"removePost(post.id)\">Удалить</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"!getPosts.length\" class=\"card  mb-3\">\r\n      <div class=\"card-body\">\r\n        <p class=\"card-text  text-center\">Нет еще постов</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nexport default ({\r\n  name: \"PostsList\",\r\n  props: {\r\n    posts: { type: Array, default: () => [] },\r\n  },\r\n  data() {\r\n    return {\r\n      showPostsMax: 3,\r\n      showPosts: 3,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    getPosts() {\r\n      return this.posts.filter((post, i) => i < this.showPosts)\r\n    }\r\n  },\r\n\r\n  mounted(){\r\n    this.loadPostsIfNeeded()\r\n    this.timer = setInterval(() => this.loadPostsIfNeeded(), 300);\r\n  },\r\n  \r\n  methods: {\r\n    ...mapActions([ 'removePost' ]),\r\n\r\n    loadPostsIfNeeded(){\r\n      const lastElement = this.$refs.posts.lastElementChild\r\n      if (this.canShowMore(lastElement)) {\r\n        this.showMore()\r\n      }\r\n    },\r\n\r\n    canShowMore(el){\r\n      if(!el) return null\r\n\r\n      const rect = el.getBoundingClientRect();\r\n      const windowHeight = window.innerHeight || document.documentElement.clientHeight\r\n      \r\n      return rect.top + rect.height <= windowHeight\r\n    },\r\n\r\n    showMore(){\r\n      this.showPosts = Math.min(this.showPosts + this.showPostsMax, this.posts.length)\r\n    },\r\n\r\n    read(id) {\r\n      this.$router.push({name: \"Post\", params: { id }})\r\n    }\r\n  },\r\n\r\n  beforeUnmount(){\r\n    clearInterval(this.timer)\r\n  },\r\n})\r\n</script>\r\n","import { render } from \"./posts.vue?vue&type=template&id=d4979cc8\"\nimport script from \"./posts.vue?vue&type=script&lang=js\"\nexport * from \"./posts.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=79c916ae\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}